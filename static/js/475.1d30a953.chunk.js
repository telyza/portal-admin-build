"use strict";(self.webpackChunkTely=self.webpackChunkTely||[]).push([[475],{1386:(e,r,n)=>{n.d(r,{R$:()=>s,ts:()=>a,uK:()=>l});var o=n(69525);function s(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,o.A)(new Date(e),r)}function a(e){return(0,o.A)(new Date(e),"dd MMMM yyyy")}function l(e){return(0,o.A)(new Date(e),"dd MMM yyyy HH:mm")}},22698:(e,r,n)=>{n.d(r,{A:()=>I});var o=n(58168),s=n(98587),a=n(65043),l=n(69292),i=n(98610),t=n(88092),d=n(34535),c=n(98206),p=n(85865),u=n(67266),m=n(66734),v=n(70579);const h=(0,m.A)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var x=n(75429);const f=["slots","slotProps"],j=(0,d.Ay)(x.A,{name:"MuiBreadcrumbCollapsed"})(e=>{let{theme:r}=e;return(0,o.A)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})}),b=(0,d.Ay)(h)({width:24,height:16});const A=function(e){const{slots:r={},slotProps:n={}}=e,a=(0,s.A)(e,f),l=e;return(0,v.jsx)("li",{children:(0,v.jsx)(j,(0,o.A)({focusRipple:!0},a,{ownerState:l,children:(0,v.jsx)(b,(0,o.A)({as:r.CollapsedIcon,ownerState:l},n.collapsedIcon))}))})};var g=n(92532),y=n(72372);function _(e){return(0,y.Ay)("MuiBreadcrumbs",e)}const w=(0,g.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],q=(0,d.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{["& .".concat(w.li)]:r.li},r.root]})({}),S=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),C=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function B(e,r,n,o){return e.reduce((s,a,l)=>(l<e.length-1?s=s.concat(a,(0,v.jsx)(C,{"aria-hidden":!0,className:r,ownerState:o,children:n},"separator-".concat(l))):s.push(a),s),[])}const I=a.forwardRef(function(e,r){const n=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:h={},expandText:x="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:j=1,maxItems:b=8,separator:g="/"}=n,y=(0,s.A)(n,k),[w,C]=a.useState(!1),I=(0,o.A)({},n,{component:u,expanded:w,expandText:x,itemsAfterCollapse:f,itemsBeforeCollapse:j,maxItems:b,separator:g}),M=(e=>{const{classes:r}=e;return(0,i.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(I),R=(0,t.A)({elementType:m.CollapsedIcon,externalSlotProps:h.collapsedIcon,ownerState:I}),Y=a.useRef(null),D=a.Children.toArray(d).filter(e=>a.isValidElement(e)).map((e,r)=>(0,v.jsx)("li",{className:M.li,children:e},"child-".concat(r)));return(0,v.jsx)(q,(0,o.A)({ref:r,component:u,color:"text.secondary",className:(0,l.A)(M.root,p),ownerState:I},y,{children:(0,v.jsx)(S,{className:M.ol,ref:Y,ownerState:I,children:B(w||b&&D.length<=b?D:(e=>j+f>=e.length?e:[...e.slice(0,j),(0,v.jsx)(A,{"aria-label":x,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{C(!0);const e=Y.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(D),M.separator,g,I)})}))})},24753:(e,r,n)=>{n.d(r,{A:()=>f});var o=n(89379),s=n(80045),a=n(90620),l=n.n(a),i=n(96446),t=n(85865),d=n(88446),c=n(35475),p=n(22698),u=n(70579);const m=["links","activeLast"];function v(e){let{links:r,activeLast:n=!1}=e,a=(0,s.A)(e,m);const l=r[r.length-1].name,d=r.map(e=>(0,u.jsx)(h,{link:e},e.name)),c=r.map(e=>(0,u.jsx)("div",{children:e.name!==l?(0,u.jsx)(h,{link:e}):(0,u.jsx)(t.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:l})},e.name));return(0,u.jsx)(p.A,(0,o.A)((0,o.A)({separator:(0,u.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},a),{},{children:n?d:c}))}function h(e){let{link:r}=e;const{href:n,name:o,icon:s}=r;return(0,u.jsxs)(d.A,{variant:"body2",component:c.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[s&&(0,u.jsx)(i.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:s}),o]},o)}const x=["links","action","heading","moreLink","sx"];function f(e){let{links:r,action:n,heading:a,moreLink:c=[],sx:p}=e,m=(0,s.A)(e,x);return(0,u.jsxs)(i.A,{sx:(0,o.A)({mb:5},p),children:[(0,u.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,u.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,u.jsx)(t.A,{variant:"h4",gutterBottom:!0,children:a}),(0,u.jsx)(v,(0,o.A)({links:r},m))]}),n&&(0,u.jsx)(i.A,{sx:{flexShrink:0},children:n})]}),(0,u.jsx)(i.A,{sx:{mt:2},children:l()(c)?(0,u.jsx)(d.A,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map(e=>(0,u.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}},34475:(e,r,n)=>{n.r(r),n.d(r,{default:()=>Y});var o=n(65043),s=n(58956),a=n(73216),l=n(19252),i=n(48407),t=n(95719),d=n(11737),c=n(27720),p=n(19838),u=n(24753),m=n(89379),v=n(73033),h=n(24858),x=n(18403),f=n(72812),j=n(68903),b=n(12110),A=n(96446),g=n(85865),y=n(88911),_=n(73338),w=n(1386),k=n(50467),q=(n(20974),n(53335)),S=n(34866),C=n(43409),B=n(50716),I=n(49092),M=n(70579);function R(e){let{isEdit:r,currentAgent:n}=e;const l=(0,a.Zp)(),{t:d}=(0,I.B)(),{enqueueSnackbar:p}=(0,s.dh)(),u=(v.Ik().shape({type_id:v.Yj().required(d("field.required",{obj:d("field.type_id")})),number_id:v.Yj().required(d("field.required",{obj:d("field.number_id")})),created_on:v.Yj().required(d("field.required",{obj:d("field.created_on")})),expired_on:v.Yj().required(d("field.required",{obj:d("field.expired_on")}))}),v.Ik().shape({supervisor:v.Yj().required(d("field.required",{obj:d("field.supervisor")})),phone:v.Yj().required(d("field.required",{obj:d("field.phone")})),first_name:v.Yj().required(d("field.required",{obj:d("field.first_name")})),last_name:v.Yj().required(d("field.required",{obj:d("field.last_name")})),country:v.Yj().required(d("field.required",{obj:d("field.country")})),city:v.Yj().required(d("field.required",{obj:d("field.city")})),address:v.Yj().required(d("field.required",{obj:d("field.address")})),serie:v.ai().required(d("field.required",{obj:d("field.serie")}))})),R=(0,o.useMemo)(()=>({username:(null===n||void 0===n?void 0:n.username)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",first_name:(null===n||void 0===n?void 0:n.first_name)||"",last_name:(null===n||void 0===n?void 0:n.last_name)||"",photo:(null===n||void 0===n?void 0:n.photo)||null,country:(null===n||void 0===n?void 0:n.country)||"",city:(null===n||void 0===n?void 0:n.city)||"",address:(null===n||void 0===n?void 0:n.address)||"",born_date:(0,w.R$)((null===n||void 0===n?void 0:n.born_date)||new Date),is_block:(null===n||void 0===n?void 0:n.is_block)||!1,genre:(null===n||void 0===n?void 0:n.genre)||"",marital:(null===n||void 0===n?void 0:n.marital)||"",description:(null===n||void 0===n?void 0:n.description)||"",serie:(null===n||void 0===n?void 0:n.serie)||null,supervisor:(null===n||void 0===n?void 0:n.supervisor)||null,password:null,keyId:(null===n||void 0===n?void 0:n.uid)||-1}),[n]),Y=(0,h.mN)({resolver:(0,x.t)(u),defaultValues:R}),D=(0,t.wA)(),E=(0,C.A)(),{reset:T,watch:z,control:L,setError:P,setValue:N,handleSubmit:O,formState:{isSubmitting:H}}=Y,U=z(),[W,X]=(0,o.useState)(!1);(0,o.useEffect)(()=>{r&&n&&T(R),r||T(R)},[r,n]);const{countries:G,genres:F,maritals:V,supervisors:$}=(0,t.d4)(e=>e.generale);(0,o.useEffect)(()=>{D((0,S.HS)()),D((0,S.Gz)()),D((0,S.X6)()),D((0,S.Au)())},[D]);const K=(0,o.useCallback)(e=>{const r=e[0];r&&N("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),X(!0)},[N]),{fields:Z,append:J,remove:Q}=(0,h.jz)({control:L,name:"user_pieces_ids"});return(0,M.jsx)(q.Op,{methods:Y,onSubmit:O(async()=>{try{const e=new FormData;if(Object.entries(U).forEach(r=>{let[n,o]=r;["photo","serie","keyId","supervisor"].includes(n)||("born_date"===n?e.append(n,(0,w.R$)(o)):e.append(n,o))}),W&&e.append("photo",U.photo),e.append("serie",U.serie),U.supervisor&&e.append("supervisor",U.supervisor),e.append("keyId",U.keyId),r){const r=await(0,c.x4)(e);D((0,c.sb)(r))}else{const r=await(0,c.bj)(e);D((0,c.Yr)(r))}X(!1),T(),p(d(r?"success.UPDATED":"success.CREATE")),l(i.nB.agent.list)}catch(C){console.error(C);const r=(0,B.A)(C);if(p(d("error.".concat(r)),{variant:"error"}),E.current){var e,n,o,s,a,t,u,v,h,x,f,j,b,A,g,y,_,k,q,S;if(null!==(e=C.response)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.phone)P("phone",(0,m.A)((0,m.A)({},C),{},{message:null===(f=C.response)||void 0===f||null===(j=f.data)||void 0===j?void 0:j.phone}));if(null!==(o=C.response)&&void 0!==o&&null!==(s=o.data)&&void 0!==s&&s.born_date)P("born_date",(0,m.A)((0,m.A)({},C),{},{message:null===(b=C.response)||void 0===b||null===(A=b.data)||void 0===A?void 0:A.born_date}));if(null!==(a=C.response)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.username)P("username",(0,m.A)((0,m.A)({},C),{},{message:null===(g=C.response)||void 0===g||null===(y=g.data)||void 0===y?void 0:y.username}));if(C.response.data.email?P("email",(0,m.A)((0,m.A)({},C),{},{message:C.response.data.email})):C.response.data.non_field_errors&&P("email",(0,m.A)((0,m.A)({},C),{},{message:C.response.data.non_field_errors})),null!==(u=C.response)&&void 0!==u&&null!==(v=u.data)&&void 0!==v&&v.supervisor)P("supervisor",(0,m.A)((0,m.A)({},C),{},{message:null===(_=C.response)||void 0===_||null===(k=_.data)||void 0===k?void 0:k.supervisor}));if(null!==(h=C.response)&&void 0!==h&&null!==(x=h.data)&&void 0!==x&&x.photo)P("photo",(0,m.A)((0,m.A)({},C),{},{message:null===(q=C.response)||void 0===q||null===(S=q.data)||void 0===S?void 0:S.photo}))}}}),children:(0,M.jsxs)(j.Ay,{container:!0,spacing:3,children:[(0,M.jsx)(j.Ay,{item:!0,xs:12,md:4,children:(0,M.jsxs)(b.A,{sx:{py:10,px:3},children:[r&&(0,M.jsx)(k.A,{color:U.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:U.is_block?"Banned":"Active"}),(0,M.jsx)(A.A,{sx:{mb:5},children:(0,M.jsx)(q.BF,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:K,helperText:(0,M.jsxs)(g.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,M.jsx)("br",{})," max size of ",(0,_.tm)(3145728)]})})}),r&&(0,M.jsx)(q.b8,{name:"is_block",labelPlacement:"start",label:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.A,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,M.jsx)(g.A,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,M.jsx)(j.Ay,{item:!0,xs:12,md:8,children:(0,M.jsxs)(b.A,{sx:{p:3},children:[(0,M.jsxs)(A.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,M.jsxs)(q.tX,{name:"supervisor",label:d("field.supervisor"),placeholder:d("field.supervisor"),children:[(0,M.jsx)("option",{value:""}),null===$||void 0===$?void 0:$.map(e=>(0,M.jsx)("option",{value:e.uid,children:e.full_name},e.uid))]}),(0,M.jsx)(q.nU,{name:"phone",label:d("field.phone")}),(0,M.jsx)(q.o3,{name:"first_name",label:d("field.first_name")}),(0,M.jsx)(q.o3,{name:"last_name",label:d("field.last_name")}),(0,M.jsx)(q.o3,{type:"email",name:"email",label:d("field.email")}),(0,M.jsx)(q.zl,{name:"born_date",maxDate:new Date,label:d("field.born_date")}),(0,M.jsxs)(q.tX,{name:"genre",label:d("field.genre"),placeholder:d("field.genre"),children:[(0,M.jsx)("option",{value:""}),null===F||void 0===F?void 0:F.map(e=>(0,M.jsx)("option",{value:e,children:d("genre.".concat(e))},e))]}),(0,M.jsxs)(q.tX,{name:"marital",label:d("field.marital"),placeholder:d("field.marital"),children:[(0,M.jsx)("option",{value:""}),null===V||void 0===V?void 0:V.map(e=>(0,M.jsx)("option",{value:e,children:d("marital.".concat(e))},e))]}),(0,M.jsxs)(q.tX,{name:"country",label:d("field.country"),placeholder:d("field.country"),children:[(0,M.jsx)("option",{value:""}),null===G||void 0===G?void 0:G.map(e=>(0,M.jsx)("option",{value:e.id,children:d("country.".concat(e.name))},e.id))]}),(0,M.jsx)(q.o3,{name:"city",label:d("field.city")}),(0,M.jsx)(q.o3,{name:"address",label:d("field.address")}),(0,M.jsx)(q.o3,{name:"serie",label:d("field.serie")}),(0,M.jsx)(q.o3,{name:"password",label:d("field.password")}),(0,M.jsx)(q.o3,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,M.jsx)(y.A,{alignItems:"flex-end",sx:{mt:3},children:(0,M.jsx)(f.A,{type:"submit",variant:"contained",loading:H,children:r?d("params.save_change"):d("params.create",{obj:d("p_vendor.vendor")})})})]})})]})})}function Y(){const{themeStretch:e}=(0,d.A)(),{t:r}=(0,I.B)(),n=(0,a.Zp)(),m=(0,t.wA)(),{enqueueSnackbar:v}=(0,s.dh)(),{pathname:h}=(0,a.zy)(),{userKey:x=""}=(0,a.g)(),f=h.includes("edit"),[j,b]=(0,o.useState)(null);(0,o.useEffect)(()=>{f&&A(),m((0,c.vt)(1,1))},[x]);const A=async()=>{try{const e=await(0,c.WU)(x);b(e)}catch(e){console.error(e);const r=(0,B.A)(e);v(r,{variant:"error"}),n(i.nB.agent.agent)}};return(0,M.jsx)(p.A,{title:"Configuration: ".concat(r(f?"p_vendor.edit_vendor":"p_vendor.new_vendor")),children:(0,M.jsxs)(l.A,{maxWidth:!e&&"lg",children:[(0,M.jsx)(u.A,{heading:r(f?"p_vendor.edit_vendor":"p_vendor.new_vendor"),links:[{name:r("params.dashboard"),href:i.nB.root},{name:r("p_vendor.vendor"),href:i.nB.agent.root},{name:f?"".concat(r("p_vendor.vendor")," ").concat(null===j||void 0===j?void 0:j.full_name):r("p_vendor.new_vendor")}]}),(0,M.jsx)(R,{isEdit:f,currentAgent:j})]})})}},50716:(e,r,n)=>{n.d(r,{A:()=>o});const o=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}}}]);
//# sourceMappingURL=475.1d30a953.chunk.js.map