"use strict";(self.webpackChunkTely=self.webpackChunkTely||[]).push([[335],{1386:(e,r,o)=>{o.d(r,{R$:()=>n,ts:()=>a,uK:()=>t});var s=o(69525);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,s.A)(new Date(e),r)}function a(e){return(0,s.A)(new Date(e),"dd MMMM yyyy")}function t(e){return(0,s.A)(new Date(e),"dd MMM yyyy HH:mm")}},22698:(e,r,o)=>{o.d(r,{A:()=>M});var s=o(58168),n=o(98587),a=o(65043),t=o(69292),l=o(98610),i=o(88092),d=o(34535),c=o(98206),p=o(85865),u=o(67266),m=o(66734),h=o(70579);const x=(0,m.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var v=o(75429);const f=["slots","slotProps"],A=(0,d.Ay)(v.A,{name:"MuiBreadcrumbCollapsed"})(e=>{let{theme:r}=e;return(0,s.A)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,s.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,s.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})}),b=(0,d.Ay)(x)({width:24,height:16});const j=function(e){const{slots:r={},slotProps:o={}}=e,a=(0,n.A)(e,f),t=e;return(0,h.jsx)("li",{children:(0,h.jsx)(A,(0,s.A)({focusRipple:!0},a,{ownerState:t,children:(0,h.jsx)(b,(0,s.A)({as:r.CollapsedIcon,ownerState:t},o.collapsedIcon))}))})};var y=o(92532),g=o(72372);function _(e){return(0,g.Ay)("MuiBreadcrumbs",e)}const w=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,d.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{["& .".concat(w.li)]:r.li},r.root]})({}),C=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function B(e,r,o,s){return e.reduce((n,a,t)=>(t<e.length-1?n=n.concat(a,(0,h.jsx)(I,{"aria-hidden":!0,className:r,ownerState:s,children:o},"separator-".concat(t))):n.push(a),n),[])}const M=a.forwardRef(function(e,r){const o=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:x={},expandText:v="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:A=1,maxItems:b=8,separator:y="/"}=o,g=(0,n.A)(o,k),[w,I]=a.useState(!1),M=(0,s.A)({},o,{component:u,expanded:w,expandText:v,itemsAfterCollapse:f,itemsBeforeCollapse:A,maxItems:b,separator:y}),q=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(M),R=(0,i.A)({elementType:m.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:M}),D=a.useRef(null),E=a.Children.toArray(d).filter(e=>a.isValidElement(e)).map((e,r)=>(0,h.jsx)("li",{className:q.li,children:e},"child-".concat(r)));return(0,h.jsx)(S,(0,s.A)({ref:r,component:u,color:"text.secondary",className:(0,t.A)(q.root,p),ownerState:M},g,{children:(0,h.jsx)(C,{className:q.ol,ref:D,ownerState:M,children:B(w||b&&E.length<=b?E:(e=>A+f>=e.length?e:[...e.slice(0,A),(0,h.jsx)(j,{"aria-label":v,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{I(!0);const e=D.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(E),q.separator,y,M)})}))})},24753:(e,r,o)=>{o.d(r,{A:()=>f});var s=o(89379),n=o(80045),a=o(90620),t=o.n(a),l=o(96446),i=o(85865),d=o(88446),c=o(35475),p=o(22698),u=o(70579);const m=["links","activeLast"];function h(e){let{links:r,activeLast:o=!1}=e,a=(0,n.A)(e,m);const t=r[r.length-1].name,d=r.map(e=>(0,u.jsx)(x,{link:e},e.name)),c=r.map(e=>(0,u.jsx)("div",{children:e.name!==t?(0,u.jsx)(x,{link:e}):(0,u.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:t})},e.name));return(0,u.jsx)(p.A,(0,s.A)((0,s.A)({separator:(0,u.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},a),{},{children:o?d:c}))}function x(e){let{link:r}=e;const{href:o,name:s,icon:n}=r;return(0,u.jsxs)(d.A,{variant:"body2",component:c.N_,to:o||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[n&&(0,u.jsx)(l.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:n}),s]},s)}const v=["links","action","heading","moreLink","sx"];function f(e){let{links:r,action:o,heading:a,moreLink:c=[],sx:p}=e,m=(0,n.A)(e,v);return(0,u.jsxs)(l.A,{sx:(0,s.A)({mb:5},p),children:[(0,u.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,u.jsxs)(l.A,{sx:{flexGrow:1},children:[(0,u.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:a}),(0,u.jsx)(h,(0,s.A)({links:r},m))]}),o&&(0,u.jsx)(l.A,{sx:{flexShrink:0},children:o})]}),(0,u.jsx)(l.A,{sx:{mt:2},children:t()(c)?(0,u.jsx)(d.A,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map(e=>(0,u.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}},50716:(e,r,o)=>{o.d(r,{A:()=>s});const s=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},76335:(e,r,o)=>{o.r(r),o.d(r,{default:()=>D});var s=o(65043),n=o(58956),a=o(73216),t=o(19252),l=o(48407),i=o(95719),d=o(11737),c=o(18175),p=o(19838),u=o(24753),m=o(89379),h=o(73033),x=o(24858),v=o(18403),f=o(72812),A=o(68903),b=o(12110),j=o(96446),y=o(85865),g=o(88911),_=o(73338),w=o(1386),k=o(50467),S=(o(20974),o(53335)),C=o(34866),I=o(43409),B=o(50716),M=o(49092),q=o(70579);function R(e){let{isEdit:r,currentSupervisor:o}=e;const t=(0,a.Zp)(),{t:d}=(0,M.B)(),{enqueueSnackbar:p}=(0,n.dh)(),u=(h.Ik().shape({type_id:h.Yj().required(d("field.required",{obj:d("field.type_id")})),number_id:h.Yj().required(d("field.required",{obj:d("field.number_id")})),created_on:h.Yj().required(d("field.required",{obj:d("field.created_on")})),expired_on:h.Yj().required(d("field.required",{obj:d("field.expired_on")}))}),h.Ik().shape({phone:h.Yj().required(d("field.required",{obj:d("field.phone")})),first_name:h.Yj().required(d("field.required",{obj:d("field.first_name")})),last_name:h.Yj().required(d("field.required",{obj:d("field.last_name")}))})),R=(0,s.useMemo)(()=>({username:(null===o||void 0===o?void 0:o.username)||"",email:(null===o||void 0===o?void 0:o.email)||"",phone:(null===o||void 0===o?void 0:o.phone)||"",first_name:(null===o||void 0===o?void 0:o.first_name)||"",last_name:(null===o||void 0===o?void 0:o.last_name)||"",photo:(null===o||void 0===o?void 0:o.photo)||null,country:(null===o||void 0===o?void 0:o.country)||"",city:(null===o||void 0===o?void 0:o.city)||"",address:(null===o||void 0===o?void 0:o.address)||"",born_date:(0,w.R$)((null===o||void 0===o?void 0:o.born_date)||new Date),is_block:(null===o||void 0===o?void 0:o.is_block)||!1,genre:(null===o||void 0===o?void 0:o.genre)||"",marital:(null===o||void 0===o?void 0:o.marital)||"",description:(null===o||void 0===o?void 0:o.description)||"",password:null,keyId:(null===o||void 0===o?void 0:o.uid)||-1}),[o]),D=(0,x.mN)({resolver:(0,v.t)(u),defaultValues:R}),E=(0,i.wA)(),T=(0,I.A)(),{reset:z,watch:L,control:N,setError:P,setValue:Y,handleSubmit:O,formState:{isSubmitting:H}}=D,X=L(),[G,U]=(0,s.useState)(!1);(0,s.useEffect)(()=>{r&&o&&z(R),r||z(R)},[r,o]);const{countries:W,genres:F,maritals:V,usertypeids:Z}=(0,i.d4)(e=>e.generale);(0,s.useEffect)(()=>{E((0,C.HS)()),E((0,C.Gz)()),E((0,C.X6)()),E((0,C.bC)())},[E]);const $=(0,s.useCallback)(e=>{const r=e[0];r&&Y("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),U(!0)},[Y]),{fields:K,append:J,remove:Q}=(0,x.jz)({control:N,name:"user_pieces_ids"});return(0,q.jsx)(S.Op,{methods:D,onSubmit:O(async()=>{try{const e=new FormData;if(Object.entries(X).forEach(r=>{let[o,s]=r;["photo","keyId"].includes(o)||("born_date"===o?e.append(o,(0,w.R$)(s)):e.append(o,s))}),G&&e.append("photo",X.photo),e.append("keyId",X.keyId),r){const r=await(0,c.I8)(e);E((0,c.vX)(r))}else{const r=await(0,c.C1)(e);E((0,c.Zu)(r))}U(!1),z(),p(d(r?"success.UPDATED":"success.CREATE")),t(l.nB.supervisor.list)}catch(_){console.error(_);const r=(0,B.A)(_);if(p(d("error.".concat(r)),{variant:"error"}),T.current){var e,o,s,n,a,i,u,h,x,v,f,A,b,j,y,g;if(null!==(e=_.response)&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.phone)P("phone",(0,m.A)((0,m.A)({},_),{},{message:null===(x=_.response)||void 0===x||null===(v=x.data)||void 0===v?void 0:v.phone}));if(null!==(s=_.response)&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.born_date)P("born_date",(0,m.A)((0,m.A)({},_),{},{message:null===(f=_.response)||void 0===f||null===(A=f.data)||void 0===A?void 0:A.born_date}));if(null!==(a=_.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.username)P("username",(0,m.A)((0,m.A)({},_),{},{message:null===(b=_.response)||void 0===b||null===(j=b.data)||void 0===j?void 0:j.username}));if(_.response.data.email?P("email",(0,m.A)((0,m.A)({},_),{},{message:_.response.data.email})):_.response.data.non_field_errors&&P("email",(0,m.A)((0,m.A)({},_),{},{message:_.response.data.non_field_errors})),null!==(u=_.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&h.photo)P("photo",(0,m.A)((0,m.A)({},_),{},{message:null===(y=_.response)||void 0===y||null===(g=y.data)||void 0===g?void 0:g.photo}))}}}),children:(0,q.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,q.jsx)(A.Ay,{item:!0,xs:12,md:4,children:(0,q.jsxs)(b.A,{sx:{py:10,px:3},children:[r&&(0,q.jsx)(k.A,{color:X.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:X.is_block?"Banned":"Active"}),(0,q.jsx)(j.A,{sx:{mb:5},children:(0,q.jsx)(S.BF,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:$,helperText:(0,q.jsxs)(y.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,q.jsx)("br",{})," max size of ",(0,_.tm)(3145728)]})})}),r&&(0,q.jsx)(S.b8,{name:"is_block",labelPlacement:"start",label:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y.A,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,q.jsx)(y.A,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,q.jsx)(A.Ay,{item:!0,xs:12,md:8,children:(0,q.jsxs)(b.A,{sx:{p:3},children:[(0,q.jsxs)(j.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,q.jsx)(S.o3,{name:"first_name",label:d("field.first_name")}),(0,q.jsx)(S.o3,{name:"last_name",label:d("field.last_name")}),(0,q.jsx)(S.nU,{name:"phone",label:d("field.phone")}),(0,q.jsx)(S.o3,{type:"email",name:"email",label:d("field.email")}),(0,q.jsx)(S.zl,{name:"born_date",maxDate:new Date,label:d("field.born_date")}),(0,q.jsxs)(S.tX,{name:"genre",label:d("field.genre"),placeholder:d("field.genre"),children:[(0,q.jsx)("option",{value:""}),null===F||void 0===F?void 0:F.map(e=>(0,q.jsx)("option",{value:e,children:d("genre.".concat(e))},e))]}),(0,q.jsxs)(S.tX,{name:"marital",label:d("field.marital"),placeholder:d("field.marital"),children:[(0,q.jsx)("option",{value:""}),null===V||void 0===V?void 0:V.map(e=>(0,q.jsx)("option",{value:e,children:d("marital.".concat(e))},e))]}),(0,q.jsxs)(S.tX,{name:"country",label:d("field.country"),placeholder:d("field.country"),children:[(0,q.jsx)("option",{value:""}),null===W||void 0===W?void 0:W.map(e=>(0,q.jsx)("option",{value:e.id,children:d("country.".concat(e.name))},e.id))]}),(0,q.jsx)(S.o3,{name:"city",label:d("field.city")}),(0,q.jsx)(S.o3,{name:"address",label:d("field.address")}),(0,q.jsx)(S.o3,{name:"password",label:d("field.password")}),(0,q.jsx)(S.o3,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,q.jsx)(g.A,{alignItems:"flex-end",sx:{mt:3},children:(0,q.jsx)(f.A,{type:"submit",variant:"contained",loading:H,children:r?d("params.save_change"):d("params.create",{obj:d("p_supervisor.supervisor")})})})]})})]})})}function D(){const{themeStretch:e}=(0,d.A)(),{t:r}=(0,M.B)(),o=(0,a.Zp)(),m=(0,i.wA)(),{enqueueSnackbar:h}=(0,n.dh)(),{pathname:x}=(0,a.zy)(),{supervisorKey:v=""}=(0,a.g)(),f=x.includes("edit"),[A,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{f&&j(),m((0,c.Au)(1,1))},[v]);const j=async()=>{try{const e=await(0,c.Nk)(v);b(e)}catch(e){console.error(e);const r=(0,B.A)(e);h(r,{variant:"error"}),o(l.nB.supervisor.supervisor)}};return(0,q.jsx)(p.A,{title:"Configuration: ".concat(r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor")),children:(0,q.jsxs)(t.A,{maxWidth:!e&&"lg",children:[(0,q.jsx)(u.A,{heading:r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor"),links:[{name:r("params.dashboard"),href:l.nB.root},{name:r("p_supervisor.supervisor"),href:l.nB.supervisor.root},{name:f?"".concat(r("p_supervisor.supervisor")," ").concat(null===A||void 0===A?void 0:A.full_name):r("p_supervisor.new_supervisor")}]}),(0,q.jsx)(R,{isEdit:f,currentSupervisor:A})]})})}}}]);
//# sourceMappingURL=335.323cd7e9.chunk.js.map