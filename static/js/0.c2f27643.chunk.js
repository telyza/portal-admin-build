"use strict";(self.webpackChunkTely=self.webpackChunkTely||[]).push([[0],{1386:(e,a,n)=>{n.d(a,{R$:()=>r,ts:()=>i,uK:()=>t});var s=n(69525);function r(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,s.A)(new Date(e),a)}function i(e){return(0,s.A)(new Date(e),"dd MMMM yyyy")}function t(e){return(0,s.A)(new Date(e),"dd MMM yyyy HH:mm")}},21152:(e,a,n)=>{n.d(a,{A:()=>r});var s=n(65043);function r(e){const[a,n]=(0,s.useState)(e||"");return{currentTab:a,onChangeTab:(e,a)=>{n(a)},setCurrentTab:n}}},24753:(e,a,n)=>{n.d(a,{A:()=>j});var s=n(89379),r=n(80045),i=n(90620),t=n.n(i),o=n(96446),l=n(85865),d=n(88446),c=n(35475),m=n(22698),p=n(70579);const u=["links","activeLast"];function h(e){let{links:a,activeLast:n=!1}=e,i=(0,r.A)(e,u);const t=a[a.length-1].name,d=a.map(e=>(0,p.jsx)(x,{link:e},e.name)),c=a.map(e=>(0,p.jsx)("div",{children:e.name!==t?(0,p.jsx)(x,{link:e}):(0,p.jsx)(l.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:t})},e.name));return(0,p.jsx)(m.A,(0,s.A)((0,s.A)({separator:(0,p.jsx)(o.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},i),{},{children:n?d:c}))}function x(e){let{link:a}=e;const{href:n,name:s,icon:r}=a;return(0,p.jsxs)(d.A,{variant:"body2",component:c.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&(0,p.jsx)(o.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),s]},s)}const v=["links","action","heading","moreLink","sx"];function j(e){let{links:a,action:n,heading:i,moreLink:c=[],sx:m}=e,u=(0,r.A)(e,v);return(0,p.jsxs)(o.A,{sx:(0,s.A)({mb:5},m),children:[(0,p.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,p.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,p.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:i}),(0,p.jsx)(h,(0,s.A)({links:a},u))]}),n&&(0,p.jsx)(o.A,{sx:{flexShrink:0},children:n})]}),(0,p.jsx)(o.A,{sx:{mt:2},children:t()(c)?(0,p.jsx)(d.A,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map(e=>(0,p.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}},97e3:(e,a,n)=>{n.r(a),n.d(a,{default:()=>R});var s=n(65043),r=n(19252),i=n(8939),t=n(24056),o=n(96446),l=(n(48407),n(21152)),d=n(11737),c=n(30342),m=(n(70140),n(19838)),p=n(20974),u=n(24753),h=n(49092),x=n(73033),v=n(58956),j=n(18403),A=n(24858),f=n(12110),b=n(88911),g=n(72812),w=n(53335),y=n(63204),k=n(70579);function S(){const{enqueueSnackbar:e}=(0,v.dh)(),{t:a}=(0,h.B)(),n=x.Ik().shape({oldPassword:x.Yj().required("Old Password is required"),newPassword:x.Yj().min(6,"Password must be at least 6 characters").required("New Password is required"),confirmNewPassword:x.Yj().oneOf([x.KR("newPassword"),null],"Passwords must match")}),s=(0,A.mN)({resolver:(0,j.t)(n),defaultValues:{oldPassword:"",newPassword:"",confirmNewPassword:""}}),{reset:r,handleSubmit:i,formState:{isSubmitting:t}}=s;return(0,k.jsx)(f.A,{sx:{p:3},children:(0,k.jsx)(w.Op,{methods:s,onSubmit:i(async a=>{try{const n=await y.A.put("/api/v1/admin-api/update-password",a);r(),e(n.data)}catch(n){console.error(n),e(n.response.data,{variant:"error"})}}),children:(0,k.jsxs)(b.A,{spacing:3,alignItems:"flex-end",children:[(0,k.jsx)(w.o3,{name:"oldPassword",type:"password",label:a("params.oldpassword")}),(0,k.jsx)(w.o3,{name:"newPassword",type:"password",label:a("params.newpassword")}),(0,k.jsx)(w.o3,{name:"confirmNewPassword",type:"password",label:a("params.confpassword")}),(0,k.jsx)(g.A,{type:"submit",variant:"contained",loading:t,children:a("params.save")})]})})})}var _=n(89379),q=n(68903),P=n(85865),N=n(43409),M=n(73338),T=n(1386),D=n(95719),Y=n(34866);function C(){const{user:e,update:a}=(0,c.A)(),n=(0,D.wA)(),{t:r}=(0,h.B)(),{countries:i,genres:t,maritals:l}=(0,D.d4)(e=>e.generale);(0,s.useEffect)(()=>{n((0,Y.X6)()),n((0,Y.HS)()),n((0,Y.Gz)())},[n]);const{enqueueSnackbar:d}=(0,v.dh)(),m=(0,N.A)(),p=x.Ik().shape({phone:x.Yj().required("phone is required"),firstName:x.Yj().required("firstName is required"),lastName:x.Yj().required("lastName is required"),email:x.Yj().email("Email must be a valid email address").required("email is required"),photo:x.gl().required("photo is required"),country:x.Yj().required("country is required"),description:x.Yj().required("description is required")}),u={phone:(null===e||void 0===e?void 0:e.phone)||"",firstName:(null===e||void 0===e?void 0:e.first_name)||"",lastName:(null===e||void 0===e?void 0:e.last_name)||"",username:(null===e||void 0===e?void 0:e.username)||"",born_date:(null===e||void 0===e?void 0:e.born_date)||new Date,email:(null===e||void 0===e?void 0:e.email)||"",photo:(null===e||void 0===e?void 0:e.photo)||"",country:(null===e||void 0===e?void 0:e.country)||"",description:(null===e||void 0===e?void 0:e.description)||"",city:(null===e||void 0===e?void 0:e.city)||"",address:(null===e||void 0===e?void 0:e.address)||"",genre:(null===e||void 0===e?void 0:e.genre)||"",marital:(null===e||void 0===e?void 0:e.marital)||""},[y,S]=(0,s.useState)(!1),C=(0,A.mN)({resolver:(0,j.t)(p),defaultValues:u}),{setValue:O,watch:R,setError:B,handleSubmit:L,formState:{isSubmitting:I}}=C,U=R(),z=(0,s.useCallback)(e=>{const a=e[0];a&&O("photo",Object.assign(a,{preview:URL.createObjectURL(a)})),S(!0)},[O]);return(0,k.jsx)(w.Op,{methods:C,onSubmit:L(async e=>{try{const n=new FormData;Object.entries(U).forEach(e=>{let[a,s]=e;["photo"].includes(a)||("born_date"===a?n.append(a,(0,T.R$)(s)):n.append(a,s))}),!0===y&&n.append("photo",e.photo),await a(n),d("Update success!")}catch(n){console.error(n),m.current&&(B("afterSubmit",(0,_.A)((0,_.A)({},n),{},{message:n.response.statusText})),n.response.data.phone&&B("phone",(0,_.A)((0,_.A)({},n),{},{message:n.response.data.phone})),n.response.data.username&&B("username",(0,_.A)((0,_.A)({},n),{},{message:n.response.data.username})),n.response.data.email?B("email",(0,_.A)((0,_.A)({},n),{},{message:n.response.data.email})):n.response.data.non_field_errors&&B("email",(0,_.A)((0,_.A)({},n),{},{message:n.response.data.non_field_errors})),n.response.data.photo&&B("photo",(0,_.A)((0,_.A)({},n),{},{message:n.response.data.photo})))}}),children:(0,k.jsxs)(q.Ay,{container:!0,spacing:3,children:[(0,k.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(f.A,{sx:{py:10,px:3,textAlign:"center"},children:(0,k.jsx)(w.BF,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:z,helperText:(0,k.jsxs)(P.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,k.jsx)("br",{})," max size of ",(0,M.tm)(3145728)]})})})}),(0,k.jsx)(q.Ay,{item:!0,xs:12,md:8,children:(0,k.jsxs)(f.A,{sx:{p:3},children:[(0,k.jsxs)(o.A,{sx:{display:"grid",rowGap:3,columnGap:2,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,k.jsx)(w.o3,{type:"email",name:"email",label:r("field.email")}),(0,k.jsx)(w.nU,{name:"phone",label:r("field.phone")}),(0,k.jsx)(w.o3,{name:"first_name",label:r("field.first_name")}),(0,k.jsx)(w.o3,{name:"last_name",label:r("field.last_name")}),(0,k.jsx)(w.zl,{name:"born_date",maxDate:new Date,label:r("field.born_date")}),(0,k.jsxs)(w.tX,{name:"genre",label:r("field.genre"),placeholder:r("field.genre"),children:[(0,k.jsx)("option",{value:""}),null===t||void 0===t?void 0:t.map(e=>(0,k.jsx)("option",{value:e,children:r("genre.".concat(e))},e))]}),(0,k.jsxs)(w.tX,{name:"marital",label:r("field.marital"),placeholder:r("field.marital"),children:[(0,k.jsx)("option",{value:""}),null===l||void 0===l?void 0:l.map(e=>(0,k.jsx)("option",{value:e,children:r("marital.".concat(e))},e))]}),(0,k.jsxs)(w.tX,{name:"country",label:r("field.country"),placeholder:r("field.country"),children:[(0,k.jsx)("option",{value:""}),null===i||void 0===i?void 0:i.map(e=>(0,k.jsx)("option",{value:e.id,children:r("country.".concat(e.name))},e.id))]}),(0,k.jsx)(w.o3,{name:"city",label:r("field.city")})]}),(0,k.jsxs)(b.A,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:[(0,k.jsx)(w.o3,{name:"description",multiline:!0,rows:4,label:"Description"}),(0,k.jsx)(g.A,{type:"submit",variant:"contained",loading:I,children:r("params.save_change")})]})]})})]})})}var O=n(73216);function R(){(0,D.wA)();const e=(0,O.zy)(),a=new URLSearchParams(e.search).get("menu"),{t:n}=(0,h.B)(),{user:s,refresh:x}=(0,c.A)(),{themeStretch:v}=(0,d.A)(),{currentTab:j,onChangeTab:A}=(0,l.A)(a||"profile"),f=[{value:"profile",icon:(0,k.jsx)(p.A,{icon:"mdi:user-edit",width:20,height:20}),component:(0,k.jsx)(C,{})},{value:"change_password",icon:(0,k.jsx)(p.A,{icon:"ic:round-vpn-key",width:20,height:20}),component:(0,k.jsx)(S,{})}];return(0,k.jsx)(m.A,{title:"User: Account Settings",children:(0,k.jsxs)(r.A,{maxWidth:!v&&"lg",children:[(0,k.jsx)(u.A,{heading:n("params.account"),links:[{name:n("params.account_setting")}]}),(0,k.jsx)(i.A,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:j,onChange:A,children:f.map(e=>(0,k.jsx)(t.A,{disableRipple:!0,label:n("params."+e.value),icon:e.icon,value:e.value},e.value))}),(0,k.jsx)(o.A,{sx:{mb:5}}),f.map(e=>e.value===j&&(0,k.jsx)(o.A,{children:e.component},e.value))]})})}}}]);
//# sourceMappingURL=0.c2f27643.chunk.js.map